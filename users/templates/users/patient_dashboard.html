{% extends "base.html" %}

{% block content %}
<h2 class="mb-4">Patient Dashboard</h2>

<div class="card mb-4">
    <div class="card-header bg-primary text-white">
        Book Appointment
    </div>
    <div class="card-body">
        <form method="post">
            {% csrf_token %}

            <div class="mb-3">
                <label class="form-label">Doctor</label>
                <select class="form-select" name="doctor" required>
                    {% for doctor in doctors %}
                        <option value="{{ doctor.id }}">
                            Dr. {{ doctor.username }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Date</label>
                <input type="date" class="form-control" name="date" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Time</label>
                <input type="time" class="form-control" name="time" required>
            </div>

            <button class="btn btn-success">Book Appointment</button>
        </form>
    </div>
</div>

<h4>My Appointments</h4>

<table class="table table-bordered">
    <tr>
        <th>Doctor</th>
        <th>Date</th>
        <th>Time</th>
        <th>Status</th>
    </tr>

    {% for appointment in appointments %}
    <tr>
        <td>Dr. {{ appointment.doctor.username }}</td>
        <td>{{ appointment.date }}</td>
        <td>{{ appointment.time }}</td>
        <td>{{ appointment.status }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="4">No appointments</td></tr>
    {% endfor %}
</table>
{% endblock %}

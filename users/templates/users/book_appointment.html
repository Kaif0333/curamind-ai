{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="ui-card p-4 p-md-5">
            <span class="eyebrow">Appointment</span>
            <h2 class="mb-3">Book A New Slot</h2>
            <p class="muted-note">Choose a doctor, date and time. Conflicts are blocked automatically.</p>

            <form method="post">
                {% csrf_token %}

                <div class="mb-3">
                    <label class="form-label" for="{{ form.doctor.id_for_label }}">Doctor</label>
                    {{ form.doctor }}
                    {% for error in form.doctor.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label class="form-label" for="{{ form.date.id_for_label }}">Date</label>
                        {{ form.date }}
                        <div class="small text-muted mt-1">Tip: Pick a future date only.</div>
                        {% for error in form.date.errors %}
                            <div class="text-danger small">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label" for="{{ form.time.id_for_label }}">Time</label>
                        {{ form.time }}
                        {% for error in form.time.errors %}
                            <div class="text-danger small">{{ error }}</div>
                        {% endfor %}
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label" for="{{ form.description.id_for_label }}">Description</label>
                    {{ form.description }}
                    {% for error in form.description.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>

                {% for error in form.non_field_errors %}
                    <div class="text-danger small mb-2">{{ error }}</div>
                {% endfor %}

                <button class="btn btn-brand">Book Appointment</button>
            </form>
        </div>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const dateInput = document.getElementById("id_date");
  if (dateInput && !dateInput.value) {
    const nextDay = new Date();
    nextDay.setDate(nextDay.getDate() + 1);
    const y = nextDay.getFullYear();
    const m = String(nextDay.getMonth() + 1).padStart(2, "0");
    const d = String(nextDay.getDate()).padStart(2, "0");
    dateInput.value = y + "-" + m + "-" + d;
  }
});
</script>
{% endblock %}
